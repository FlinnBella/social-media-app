{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.yourdomain.com/schemas/video-composition.json",
  "title": "VideoComposition",
  "description": "Schema for AI-generated video composition including theme, narrative, timeline, and audio specifications",
  "type": "object",
  "required": ["metadata", "theme", "narrative", "timeline", "audio"],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["totalDuration", "aspectRatio", "fps"],
      "additionalProperties": false,
      "properties": {
        "totalDuration": {
          "type": "number",
          "minimum": 5,
          "maximum": 60,
          "description": "Total video duration in seconds"
        },
        "aspectRatio": {
          "type": "string",
          "enum": ["9:16", "16:9", "1:1", "4:5"],
          "description": "Video aspect ratio for different platforms"
        },
        "fps": {
          "type": "integer",
          "enum": [24, 30, 60],
          "description": "Frames per second"
        },
        "resolution": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "width": {
              "type": "integer",
              "minimum": 480,
              "maximum": 4096
            },
            "height": {
              "type": "integer", 
              "minimum": 480,
              "maximum": 4096
            }
          }
        }
      }
    },
    
    "theme": {
      "type": "object",
      "required": ["style", "mood", "colorPalette"],
      "additionalProperties": false,
      "properties": {
        "style": {
          "type": "string",
          "enum": [
            "professional", "casual", "luxury", "minimal", 
            "energetic", "calm", "dramatic", "playful",
            "corporate", "artistic", "vintage", "modern"
          ]
        },
        "mood": {
          "type": "string",
          "enum": [
            "inspiring", "trustworthy", "exciting", "peaceful",
            "urgent", "sophisticated", "friendly", "authoritative"
          ]
        },
        "colorPalette": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "primary": {
              "type": "string", 
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Primary color in hex format"
            },
            "secondary": {
              "type": "string", 
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Secondary color in hex format"
            },
            "accent": {
              "type": "string", 
              "pattern": "^#[0-9A-Fa-f]{6}$",
              "description": "Accent color in hex format"
            },
            "grading": {
              "type": "string",
              "enum": ["warm", "cool", "vibrant", "muted", "high-contrast", "soft"],
              "description": "Color grading style to apply"
            }
          }
        },
        "typography": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "fontFamily": {
              "type": "string",
              "enum": ["Inter", "Roboto", "Playfair", "Oswald", "Lato", "Montserrat"]
            },
            "textStyle": {
              "type": "string", 
              "enum": ["bold", "regular", "light", "condensed"]
            }
          }
        }
      }
    },

    "narrative": {
      "type": "object",
      "required": ["hook", "story", "cta"],
      "additionalProperties": false,
      "properties": {
        "hook": {
          "type": "string",
          "minLength": 5,
          "maxLength": 100,
          "description": "Opening line to grab attention"
        },
        "story": {
          "type": "array",
          "items": {
            "type": "string",
            "minLength": 10,
            "maxLength": 200
          },
          "minItems": 2,
          "maxItems": 8,
          "description": "Main narrative beats"
        },
        "cta": {
          "type": "string",
          "minLength": 5,
          "maxLength": 100,
          "description": "Call-to-action ending"
        },
        "tone": {
          "type": "string",
          "enum": ["conversational", "professional", "enthusiastic", "authoritative", "friendly"]
        }
      }
    },

    "timeline": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "startTime", "duration", "type", "content"],
        "additionalProperties": false,
        "properties": {
          "id": {
            "type": "string",
            "minLength": 1
          },
          "startTime": {
            "type": "number",
            "minimum": 0
          },
          "duration": {
            "type": "number",
            "minimum": 0.5
          },
          "type": {
            "type": "string",
            "enum": ["image", "text_overlay", "transition"]
          },
          "content": {
            "anyOf": [
              {
                "$ref": "#/$defs/ImageSegment"
              },
              {
                "$ref": "#/$defs/TextOverlay"
              },
              {
                "$ref": "#/$defs/Transition"
              }
            ]
          }
        }
      }
    },

    "audio": {
      "type": "object",
      "required": ["narration", "music"],
      "additionalProperties": false,
      "properties": {
        "narration": {
          "type": "object",
          "required": ["script", "voice"],
          "additionalProperties": false,
          "properties": {
            "script": {
              "type": "array",
              "minItems": 1,
              "items": {
                "type": "object",
                "required": ["text", "timing"],
                "additionalProperties": false,
                "properties": {
                  "text": {
                    "type": "string",
                    "minLength": 1
                  },
                  "timing": {
                    "type": "object",
                    "required": ["start"],
                    "additionalProperties": false,
                    "properties": {
                      "start": {
                        "type": "number",
                        "minimum": 0
                      },
                      "end": {
                        "type": "number",
                        "minimum": 0
                      }
                    }
                  },
                  "emphasis": {
                    "type": "string",
                    "enum": ["normal", "strong", "soft", "excited"],
                    "default": "normal"
                  }
                }
              }
            },
            "voice": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "voiceId": {
                  "type": "string",
                  "description": "ElevenLabs voice ID",
                  "minLength": 1
                },
                "speed": {
                  "type": "number", 
                  "minimum": 0.5, 
                  "maximum": 2.0, 
                  "default": 1.0
                },
                "pitch": {
                  "type": "number", 
                  "minimum": 0.5, 
                  "maximum": 2.0, 
                  "default": 1.0
                },
                "stability": {
                  "type": "number", 
                  "minimum": 0, 
                  "maximum": 1, 
                  "default": 0.75
                }
              }
            }
          }
        },
        "music": {
          "type": "object",
          "required": ["enabled"],
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "trackId": {
              "type": "string",
              "description": "Reference to music library track"
            },
            "genre": {
              "type": "string",
              "enum": [
                "corporate", "upbeat", "ambient", "cinematic", "electronic",
                "acoustic", "inspiring", "calm", "dramatic", "minimal"
              ]
            },
            "mood": {
              "type": "string",
              "enum": ["energetic", "peaceful", "professional", "creative", "motivational"]
            },
            "volume": {
              "type": "number", 
              "minimum": 0, 
              "maximum": 1, 
              "default": 0.3
            },
            "fadeIn": {
              "type": "number", 
              "minimum": 0, 
              "maximum": 5, 
              "default": 1
            },
            "fadeOut": {
              "type": "number", 
              "minimum": 0, 
              "maximum": 5, 
              "default": 2
            }
          }
        }
      }
    }
  },

  "$defs": {
    "ImageSegment": {
      "type": "object",
      "required": ["imageIndex", "animation"],
      "additionalProperties": false,
      "properties": {
        "imageIndex": {
          "type": "integer",
          "minimum": 0
        },
        "animation": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "type": {
              "type": "string",
              "enum": ["pan", "zoom", "static", "ken_burns", "slide"]
            },
            "direction": {
              "type": "string", 
              "enum": ["left", "right", "up", "down", "in", "out"]
            },
            "intensity": {
              "type": "number",
              "minimum": 0.1,
              "maximum": 2.0,
              "default": 1.0
            }
          }
        },
        "crop": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "x": {
              "type": "number", 
              "minimum": 0, 
              "maximum": 1,
              "description": "X position as percentage (0-1)"
            },
            "y": {
              "type": "number", 
              "minimum": 0, 
              "maximum": 1,
              "description": "Y position as percentage (0-1)"
            },
            "width": {
              "type": "number", 
              "minimum": 0.1, 
              "maximum": 1,
              "description": "Width as percentage (0.1-1)"
            },
            "height": {
              "type": "number", 
              "minimum": 0.1, 
              "maximum": 1,
              "description": "Height as percentage (0.1-1)"
            }
          }
        }
      }
    },

    "TextOverlay": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "text": {
          "type": "string",
          "minLength": 1
        },
        "position": {
          "type": "string",
          "enum": ["top", "center", "bottom", "top-left", "top-right", "bottom-left", "bottom-right"]
        },
        "style": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "fontSize": {
              "type": "number",
              "minimum": 8,
              "maximum": 200
            },
            "color": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "backgroundColor": {
              "type": "string",
              "pattern": "^#[0-9A-Fa-f]{6}$"
            },
            "animation": {
              "type": "string",
              "enum": ["fade_in", "slide_in", "type_on", "bounce", "none"],
              "default": "fade_in"
            }
          }
        }
      }
    },

    "Transition": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "effect": {
          "type": "string",
          "enum": ["fade", "dissolve", "slide", "zoom", "cut"],
          "default": "fade"
        },
        "easing": {
          "type": "string",
          "enum": ["linear", "ease-in", "ease-out", "ease-in-out"],
          "default": "ease-in-out"
        }
      }
    }
  }
}