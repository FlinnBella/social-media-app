{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$id": "https://api.yourdomain.com/schemas/video-composition.json",
    "title": "VideoComposition",
    "description": "Schema for AI-generated video composition including theme, narrative, timeline, and audio specifications",
    "type": "object",
    "required": ["metadata", "theme", "narrative", "timeline", "audio"],
    "additionalProperties": false,
    "properties": {
      "metadata": {
        "type": "object",
        "required": ["totalDuration", "aspectRatio", "fps", "resolution"],
        "additionalProperties": false,
        "properties": {
          "totalDuration": {
            "type": "number",
            "minimum": 8,
            "maximum": 15,
            "description": "Total video duration in seconds"
          },
          "aspectRatio": {
            "type": "string",
            "enum": ["9:16", "1:1"],
            "description": "Video aspect ratio for different platforms; support for 16:9 and 4:5 later"
          },
          "fps": {
            "type": "integer",
            "enum": [24, 30],
            "description": "Frames per second; support for 60 later"
          },
          "resolution": {
            "type": "array",
            "minItems": 2,
            "maxItems": 2,
            "description": "Video resolution as [width, height] that corresponds to the selected aspect ratio. Only supported resolutions are allowed.",
            "items": [
              { "type": "integer" },
              { "type": "integer" }
            ],
            "oneOf": [
              {
                "description": "Valid 9:16 resolutions",
                "enum": [
                  [1080, 1920]
                ]
              },
              {
                "description": "Valid 1:1 resolutions",
                "enum": [
                  [1080, 1080]
                ]
              }
            ]
          }
        }
      },
      
      "theme": {
        "type": "object",
        "required": ["style", "mood", "colorPalette"],
        "additionalProperties": false,
        "properties": {
          "style": {
            "type": "string",
            "enum": [
              "professional", "casual", "luxury", "minimal", 
              "energetic", "calm", "dramatic", "playful",
              "corporate", "artistic", "vintage", "modern"
            ]
          },
          "mood": {
            "type": "string",
            "enum": [
              "inspiring", "trustworthy", "exciting", "peaceful",
              "urgent", "sophisticated", "friendly", "authoritative"
            ]
          },
          "colorPalette": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "grading": {
                "type": "string",
                "enum": ["warm", "cool", "vibrant", "muted", "high-contrast", "soft"],
                "description": "Color grading style to apply"
              }
            }
          },
          "typography": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "fontFamily": {
                "type": "string",
                "description": "Font family; will be infered from the mood decisions"
              },
              "textStyle": {
                "type": "string", 
                "enum": ["bold", "regular", "light", "condensed"]
              }
            }
          }
        }
      },
  
      "narrative": {
        "type": "object",
        "required": ["hook", "story", "cta"],
        "additionalProperties": false,
        "properties": {
          "hook": {
            "type": "string",
            "minLength": 5,
            "maxLength": 100,
            "description": "Opening line to grab attention"
          },
          "story": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 10,
              "maxLength": 200
            },
            "minItems": 2,
            "maxItems": 8,
            "description": "Main narrative beats"
          },
          "cta": {
            "type": "string",
            "minLength": 5,
            "maxLength": 100,
            "description": "Call-to-action ending"
          },
          "tone": {
            "type": "string",
            "enum": ["conversational", "professional", "enthusiastic", "authoritative", "friendly"]
          }
        }
      },
  
      "timeline": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "required": ["id", "startTime", "duration", "type", "content"],
          "additionalProperties": false,
          "properties": {
            "id": {
              "type": "string",
              "minLength": 1
            },
            "startTime": {
              "type": "number",
              "minimum": 0
            },
            "duration": {
              "type": "number",
              "minimum": 0.5
            },
            "type": {
              "type": "string",
              "enum": ["image", "text_overlay", "transition"]
            },
            "content": {
              "anyOf": [
                {
                  "$ref": "#/$defs/ImageSegment"
                },
                {
                  "$ref": "#/$defs/TextOverlay"
                },
                {
                  "$ref": "#/$defs/Transition"
                }
              ]
            }
          }
        }
      },
  
      "audio": {
        "type": "object",
        "required": ["narration", "music"],
        "additionalProperties": false,
        "properties": {
          "narration": {
            "type": "object",
            "required": ["script", "voice"],
            "additionalProperties": false,
            "properties": {
              "script": {
                "type": "array",
                "minItems": 1,
                "items": {
                  "type": "object",
                  "required": ["text", "timing"],
                  "additionalProperties": false,
                  "properties": {
                    "text": {
                      "type": "string",
                      "minLength": 1
                    },
                    "timing": {
                      "type": "object",
                      "required": ["start"],
                      "additionalProperties": false,
                      "properties": {
                        "start": {
                          "type": "number",
                          "minimum": 0
                        },
                        "end": {
                          "type": "number",
                          "minimum": 0
                        }
                      }
                    },
                    "emphasis": {
                      "type": "string",
                      "enum": ["normal", "strong", "soft", "excited"],
                      "default": "normal"
                    }
                  }
                }
              },
              "voice": {
                "type": "object",
                "additionalProperties": false,
                "properties": {
                  "voiceId": {
                    "type": "string",
                    "description": "ElevenLabs voice ID",
                    "minLength": 1
                  },
                  "speed": {
                    "type": "number", 
                    "minimum": 0.5, 
                    "maximum": 2.0, 
                    "default": 1.0
                  },
                  "pitch": {
                    "type": "number", 
                    "minimum": 0.5, 
                    "maximum": 2.0, 
                    "default": 1.0
                  },
                  "stability": {
                    "type": "number", 
                    "minimum": 0, 
                    "maximum": 1, 
                    "default": 0.75
                  }
                }
              }
            }
          },
          "music": {
            "type": "object",
            "required": ["enabled"],
            "additionalProperties": false,
            "properties": {
              "enabled": {
                "type": "boolean"
              },
              "trackId": {
                "type": "string",
                "description": "Reference to music library track; will be inferred from music library"
              },
              "genre": {
                "type": "string",
                "enum": [
                  "corporate", "upbeat", "ambient", "cinematic", "electronic",
                  "acoustic", "inspiring", "calm", "dramatic", "minimal"
                ]
              },
              "mood": {
                "type": "string",
                "enum": ["energetic", "peaceful", "professional", "creative", "motivational"]
              },
              "volume": {
                "type": "number", 
                "minimum": 0, 
                "maximum": 1, 
                "default": 0.3
              }
            },
            "description": "Background music; fade-in/out handled by ffmpeg"

          }
        }
      }
    },
  
    "$defs": {
      "ImageSegment": {
        "type": "object",
        "required": ["imageIndex", "animation"],
        "additionalProperties": false,
        "properties": {
          "imageIndex": {
            "type": "integer",
            "minimum": 0
          },
          "animation": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "type": {
                "type": "string",
                "enum": ["pan", "zoom", "static", "ken_burns", "slide"],
                "description": "Animation type; direction will be added later"
              },
              "intensity": {
                "type": "number",
                "minimum": 0.1,
                "maximum": 2.0,
                "default": 1.0,
                "description": "Animation intensity;have no idea what this does - won't use"
              }
            }
          },
          "crop": {
            "type": "object",
            "additionalProperties": false,
            "description": "Crop; don't think this will be used, but may to conform with aspect-ratio && resolution",
            "properties": {
              "x": {
                "type": "number", 
                "minimum": 0, 
                "maximum": 1,
                "description": "X position as percentage (0-1)"
              },
              "y": {
                "type": "number", 
                "minimum": 0, 
                "maximum": 1,
                "description": "Y position as percentage (0-1)"
              },
              "width": {
                "type": "number", 
                "minimum": 0.1, 
                "maximum": 1,
                "description": "Width as percentage (0.1-1)"
              },
              "height": {
                "type": "number", 
                "minimum": 0.1, 
                "maximum": 1,
                "description": "Height as percentage (0.1-1)"
              }
            }
          }
        }
      },
  
      "TextOverlay": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "text": {
            "type": "string",
            "minLength": 1
          },
          "position": {
            "type": "string",
            "enum": ["center-left", "center-right", "center"],
            "default": "center",
            "description": "Position of the text overlay"
          },
          "style": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "fontSize": {
                "type": "number",
                "minimum": 8,
                "maximum": 200,
                "default": 12
              },
              "color": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "backgroundColor": {
                "type": "string",
                "pattern": "^#[0-9A-Fa-f]{6}$"
              },
              "animation": {
                "type": "string",
                "enum": ["fade_in", "slide_in", "type_on", "bounce", "none"],
                "default": "fade_in"
              }
            },
            "required": ["fontSize"]
          }
        }
      },
  
      "Transition": {
        "type": "object",
        "additionalProperties": false,
        "properties": {
          "effect": {
            "type": "string",
            "enum": ["fade", "dissolve", "slide", "zoom", "cut"],
            "default": "fade"
          },
          "easing": {
            "type": "string",
            "enum": ["linear", "ease-in", "ease-out", "ease-in-out"],
            "default": "ease-in-out"
          }
        }
      }
    }
  }