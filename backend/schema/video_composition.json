{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.yourdomain.com/schemas/video-composition.json",
  "title": "VideoComposition",
  "description": "Schema for AI-generated video composition including theme, narrative, timeline, and audio specifications",
  "type": "object",
  "required": [
    "metadata",
    "theme",
    "narrative",
    "timeline",
    "audio"
  ],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "type": "object",
      "required": [
        "totalDuration",
        "aspectRatio",
        "fps",
        "resolution"
      ],
      "additionalProperties": false,
      "properties": {
        "totalDuration": {
          "type": "number",
          "minimum": 8,
          "maximum": 15,
          "description": "Total video duration in seconds"
        },
        "aspectRatio": {
          "type": "string",
          "enum": [
            "9:16",
            "1:1"
          ],
          "description": "Video aspect ratio for different platforms; support for 16:9 and 4:5 later"
        },
        "fps": {
          "type": "string",
          "enum": [
            "24",
            "30"
          ],
          "description": "Frames per second; support for 60 later"
        },
        "resolution": {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "description": "Video resolution as [width, height] that corresponds to the selected aspect ratio. Only supported resolutions are allowed.",
          "items": [
            {
              "type": "integer"
            },
            {
              "type": "integer"
            }
          ],
          "oneOf": [
            {
              "description": "Valid 9:16 resolutions",
              "enum": [
                [
                  1080,
                  1920
                ]
              ]
            },
            {
              "description": "Valid 1:1 resolutions",
              "enum": [
                [
                  1080,
                  1080
                ]
              ]
            }
          ]
        }
      }
    },
    "theme": {
      "type": "object",
      "required": [
        "style",
        "mood",
        "grading"
      ],
      "additionalProperties": false,
      "properties": {
        "style": {
          "type": "string",
          "enum": [
            "professional",
            "casual",
            "luxury",
            "minimal",
            "energetic",
            "calm",
            "dramatic",
            "playful",
            "corporate",
            "artistic",
            "vintage",
            "modern"
          ]
        },
        "mood": {
          "type": "string",
          "enum": [
            "inspiring",
            "trustworthy",
            "exciting",
            "peaceful",
            "urgent",
            "sophisticated",
            "friendly",
            "authoritative"
          ]
        },
        "grading": {
          "type": "string",
          "enum": [
            "warm",
            "cool",
            "vibrant",
            "muted",
            "high-contrast",
            "soft"
          ],
          "description": "Color grading style to apply"
        }
      }
    },
    "Timeline": {
      "type": "object",
      "required": [
        "totalDuration",
        "ImageTimeline",
        "TextTimeline"
      ],
      "additionalProperties": false,
      "properties": {
        "totalDuration": {
          "type": "number",
          "minimum": 0,
          "description": "Total duration of the timeline in seconds; must match what's in the metadata"
        },
        "ImageTimeline": {
          "type": "object",
          "required": [
            "ImageSegments"
          ],
          "additionalProperties": false,
          "properties": {
            "ImageSegments": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/ImageSegment"
              }
            }
          }
        },
        "TextTimeline": {
          "type": "object",
          "required": [
            "TextSegments"
          ],
          "additionalProperties": false,
          "properties": {
            "style": {
              "$ref": "#/$defs/TextStyle",
              "description": "Optional styling for the text"
            },
            "TextSegments": {
              "type": "array",
              "items": {
                "$ref": "#/$defs/TextSegment"
              }
            }
          }
        }
      },
      "description": "Timeline of the entire video; images and text are loosely coupled"
    },
    "audio": {
      "type": "object",
      "required": [
        "music"
      ],
      "additionalProperties": false,
      "properties": {
        "narration": {
          "type": "object",
          "required": [
            "voice"
          ],
          "additionalProperties": false,
          "properties": {
            "voice": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "voiceId": {
                  "type": "string",
                  "description": "ElevenLabs voice ID",
                  "minLength": 1
                },
                "emphasis": {
                  "type": "string",
                  "enum": [
                    "normal",
                    "strong",
                    "soft",
                    "excited"
                  ],
                  "default": "normal"
                },
                "speed": {
                  "type": "number",
                  "minimum": 0.5,
                  "maximum": 2.0,
                  "default": 1.0
                },
                "pitch": {
                  "type": "number",
                  "minimum": 0.5,
                  "maximum": 2.0,
                  "default": 1.0
                },
                "stability": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1,
                  "default": 0.75
                }
              }
            }
          }
        },
        "music": {
          "type": "object",
          "required": [
            "enabled"
          ],
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "trackId": {
              "type": "string",
              "description": "Reference to music library track; will be inferred from music library"
            },
            "genre": {
              "type": "string",
              "enum": [
                "corporate",
                "upbeat",
                "ambient",
                "minimal",
                "uplifting"
              ]
            },
            "mood": {
              "type": "string",
              "enum": [
                "energetic",
                "peaceful",
                "professional",
                "creative",
                "motivational"
              ]
            },
            "volume": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3
            }
          },
          "description": "Background music; fade-in/out handled by ffmpeg"
        }
      }
    }
  }
}