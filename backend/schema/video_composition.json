{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://api.yourdomain.com/schemas/video-composition.json",
  "title": "VideoComposition",
  "description": "Schema for AI-generated video composition including theme, narrative, timeline, and audio specifications",
  "type": "object",
  "required": [
    "metadata",
    "theme",
    "Timeline",
    "audio"
  ],
  "additionalProperties": false,
  "properties": {
    "metadata": {
      "type": "object",
      "required": [
        "totalDuration",
        "aspectRatio",
        "fps",
        "resolution"
      ],
      "additionalProperties": false,
      "properties": {
        "totalDuration": {
          "type": "number",
          "minimum": 8,
          "maximum": 15,
          "description": "Total video duration in seconds"
        },
        "aspectRatio": {
          "type": "string",
          "enum": [
            "9:16",
            "1:1"
          ],
          "description": "Video aspect ratio for different platforms; support for 16:9 and 4:5 later"
        },
        "fps": {
          "type": "string",
          "enum": [
            "24",
            "30"
          ],
          "description": "Frames per second; support for 60 later"
        },
        "resolution": {
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "description": "Video resolution as [width, height] that corresponds to the selected aspect ratio. Only supported resolutions are allowed.",
          "items": [
            {
              "type": "integer"
            }     
          ],
          "oneOf": [
            {
              "description": "Valid 9:16 resolutions",
              "enum": [
                [
                  1080,
                  1920
                ]
              ]
            },
            {
              "description": "Valid 1:1 resolutions",
              "enum": [
                [
                  1080,
                  1080
                ]
              ]
            }
          ]
        }
      }
    },
    "theme": {
      "type": "object",
      "required": [
        "style",
        "mood",
        "grading"
      ],
      "additionalProperties": false,
      "properties": {
        "style": {
          "type": "string",
          "enum": [
            "professional",
            "casual",
            "luxury",
            "minimal",
            "energetic",
            "calm",
            "dramatic",
            "playful",
            "corporate",
            "artistic",
            "vintage",
            "modern"
          ]
        },
        "mood": {
          "type": "string",
          "enum": [
            "inspiring",
            "trustworthy",
            "exciting",
            "peaceful",
            "urgent",
            "sophisticated",
            "friendly",
            "authoritative"
          ]
        },
        "grading": {
          "type": "string",
          "enum": [
            "warm",
            "cool",
            "vibrant",
            "muted",
            "high-contrast",
            "soft"
          ],
          "description": "Color grading style to apply"
        }
      }
    },
    "Timeline": {
      "type": "object",
      "required": [
        "totalDuration",
        "ImageTimeline",
        "TextTimeline"
      ],
      "additionalProperties": false,
      "properties": {
        "totalDuration": {
          "type": "number",
          "minimum": 0,
          "description": "Total duration of the timeline in seconds; must match what's in the metadata"
        },
        "ImageTimeline": {
          "type": "object",
          "required": [
            "ImageSegments"
          ],
          "additionalProperties": false,
          "properties": {
              "ImageSegments": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": [
                    "id",
                    "startTime",
                    "duration",
                    "imageIndex"
                  ],
                  "additionalProperties": false,
                  "properties": {
                    "id": {
                      "type": "string",
                      "minLength": 1,
                      "description": "Unique identifier for this image segment"
                    },
                    "startTime": {
                      "type": "number",
                      "minimum": 0,
                      "description": "Start time in seconds from beginning of video"
                    },
                    "duration": {
                      "type": "number",
                      "minimum": 0.1,
                      "maximum": 15,
                      "description": "How long this image is displayed in seconds; all image Segements must add to the total duration in the metadata"
                    },
                    "imageIndex": {
                      "type": "integer",
                      "minimum": 0,
                      "description": "Index of the image in the provided images array; current design may force order"
                    },
                        "Transition": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "effect": {
                "type": "string",
                "enum": [
                  "fade",
                  "dissolve",
                  "slide",
                  "zoom",
                  "cut"
                ],
                "default": "fade"
              },
              "easing": {
                "type": "string",
                "enum": [
                  "linear",
                  "ease-in",
                  "ease-out",
                  "ease-in-out"
                ],
                "default": "ease-in-out"
              }
            }
          }
                  }
                }
              }
          }
        },
        "TextTimeline": {
          "type": "object",
          "description": "Timeline of the entire video; images and text are loosely coupled",
          "required": [
            "TextSegments"
          ],
          "additionalProperties": false,
          "properties": {
            "TextStyle": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "fontFamily": {
                  "type": "string",
                  "description": "Font family; will be infered from the mood decisions"
                },
                "textStyle": {
                  "type": "string",
                  "enum": [
                    "bold",
                    "regular",
                    "light",
                    "condensed"
                  ]
                }
              }
            },
            "TextSegments": {
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "id",
                  "text",
                  "startTime",
                  "duration",
                  "position"
                ],
                "additionalProperties": false,
                "properties": {
                  "id": {
                    "type": "string",
                    "minLength": 1,
                    "description": "Unique identifier for this text segment"
                  },
                  "text": {
                    "type": "string",
                    "minLength": 1,
                    "maxLength": 100,
                    "description": "The text content to display"
                  },
                  "startTime": {
                    "type": "number",
                    "minimum": 0,
                    "description": "Start time in seconds from beginning of video"
                  },
                  "duration": {
                    "type": "number",
                    "minimum": 0.1,
                    "maximum": 15,
                    "description": "How long this text is displayed in seconds; all text Segements must add to the total duration in the metadata"
                  },
                  "position": {
                    "type": "string",
                    "enum": [
                      "center",
                      "center-left",
                      "center-right"
                    ],
                    "description": "Where to position the text on screen"
                  },
                  "narrativeSource": {
                    "type": "string",
                    "description": "Reference to which part of narrative this text represents",
                    "examples": [
                      "hook",
                      "story[0]",
                      "story[1]",
                      "cta"
                    ]
                  },
                  "imageRef": {
                    "type": "string",
                    "description": "Optional reference to ImageSegment ID for loose coupling"
                  }
                }
              }
            }
          }
        }
      }
        },
    "audio": {
      "type": "object",
      "required": [
        "music"
      ],
      "additionalProperties": false,
      "properties": {
        "narration": {
          "type": "object",
          "required": [
            "voice"
          ],
          "additionalProperties": false,
          "properties": {
            "voice": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "voiceId": {
                  "type": "string",
                  "description": "ElevenLabs voice ID",
                  "minLength": 1
                },
                "emphasis": {
                  "type": "string",
                  "enum": [
                    "normal",
                    "strong",
                    "soft",
                    "excited"
                  ],
                  "default": "normal"
                },
                "speed": {
                  "type": "number",
                  "minimum": 0.5,
                  "maximum": 2.0,
                  "default": 1.0
                },
                "pitch": {
                  "type": "number",
                  "minimum": 0.5,
                  "maximum": 2.0,
                  "default": 1.0
                },
                "stability": {
                  "type": "number",
                  "minimum": 0,
                  "maximum": 1,
                  "default": 0.75
                }
              }
            }
          }
        },
        "music": {
          "type": "object",
          "required": [
            "enabled"
          ],
          "additionalProperties": false,
          "properties": {
            "enabled": {
              "type": "boolean"
            },
            "trackId": {
              "type": "string",
              "description": "Reference to music library track; will be inferred from music library"
            },
            "genre": {
              "type": "string",
              "enum": [
                "corporate",
                "upbeat",
                "ambient",
                "minimal",
                "uplifting"
              ]
            },
            "mood": {
              "type": "string",
              "enum": [
                "energetic",
                "peaceful",
                "professional",
                "creative",
                "motivational"
              ]
            },
            "volume": {
              "type": "number",
              "minimum": 0,
              "maximum": 1,
              "default": 0.3
            }
          },
          "description": "Background music; fade-in/out handled by ffmpeg"
        }
      }
    }
  }
}